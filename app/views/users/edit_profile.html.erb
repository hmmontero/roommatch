<div class="myprofile-container py-4 h-100">
  <div class="card myprofile-card" style="min-height:70vh; height:70vh; margin-top:20px;">
    <div class="row g-0 h-100 w-100 align-items-stretch">
      <!-- Columna izquierda: Foto y datos básicos (no editables en este formulario) -->
      <div class="col-md-6 myprofile-photo-section"
           style="padding:30px; background: url('/assets/room1.jpg') no-repeat center center; background-size: cover;">
        <div class="text-center">
          <% if @user.photo.attached? %>
            <%= image_tag url_for(@user.photo),
                  alt: 'Foto de perfil',
                  class: 'myprofile-avatar rounded-circle shadow',
                  style: "object-fit: cover; width:150px; height:150px;" %>
          <% else %>
            <%= image_tag 'https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_960_720.png',
                  alt: 'Foto de perfil por defecto',
                  class: 'myprofile-avatar rounded-circle shadow',
                  style: "object-fit: cover; width:150px; height:150px;" %>
          <% end %>
          <h3 class="myprofile-name" style="font-size:2rem; margin-bottom:8px;">
            <%= @user.first_name %> <%= @user.last_name %>
          </h3>
          <p class="myprofile-occupation" style="font-size:1.1rem;">
            <%= @user.occupation %>
          </p>
        </div>
      </div>

      <!-- Columna derecha: Formulario de edición -->
      <div class="col-md-6 myprofile-info-section d-flex align-items-stretch">
        <div class="card-body p-4 myprofile-info d-flex flex-column justify-content-evenly"
             style="flex:1; height:100%; padding: 20px;">
          <!-- Título de sección -->
          <h5 class="myprofile-title" style="font-size:1.8rem; font-weight:700; color:#0d4029;">
            Editar Perfil
          </h5>
          <hr class="myprofile-divider" style="margin-top:0; margin-bottom:8px;">

          <%= form_with model: @user,
                        url: user_profile_path,
                        method: :patch,
                        local: true,
                        html: { class: "myprofile-form" } do |f| %>
            <!-- Row 1: Dos columnas para inputs básicos -->
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label :first_name, "Nombre",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.text_field :first_name,
                        class: "form-control",
                        placeholder: "Nombre",
                        style: "font-size:0.85rem; padding:0.4rem;" %>
                </div>
                <div class="form-group">
                  <%= f.label :last_name, "Apellido",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.text_field :last_name,
                        class: "form-control",
                        placeholder: "Apellido",
                        style: "font-size:0.85rem; padding:0.4rem;" %>
                </div>
                <div class="form-group">
                  <%= f.label :occupation, "Ocupación",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.text_field :occupation,
                        class: "form-control",
                        placeholder: "Ocupación",
                        style: "font-size:0.85rem; padding:0.4rem;" %>
                </div>
              </div>
              <div class="col-md-6">
                <div class="form-group">
                  <%= f.label :gender, "Género",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.text_field :gender,
                        class: "form-control",
                        placeholder: "Género",
                        style: "font-size:0.85rem; padding:0.4rem;" %>
                </div>
                <div class="form-group">
                  <%= f.label :birth_date, "Fecha de nacimiento",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.date_field :birth_date,
                        class: "form-control",
                        style: "font-size:0.85rem; padding:0.4rem;" %>
                </div>
              </div>
            </div>

            <!-- Row 2: Campo completo para "Acerca de mí" -->
            <div class="row">
              <div class="col-12">
                <div class="form-group">
                  <%= f.label :bio, "Acerca de mí",
                              style: "color:#0d4029; font-size:1rem;" %>
                  <%= f.text_area :bio,
                        rows: 5,
                        class: "form-control myprofile-bio",
                        placeholder: "Cuéntanos algo sobre ti...",
                        style: "font-size:0.85rem; padding:0.4rem; text-align:justify;" %>
                </div>
              </div>
            </div>

            <!-- Botones -->
            <div class="myprofile-actions text-center" style="margin-top:12px;">
              <%= f.submit "Guardar cambios",
                    class: "btn myprofile-btn",
                    style: "padding:0.5rem 1rem; font-size:1rem; display:inline-block; width:auto;" %>
            </div>
            <div class="myprofile-actions text-center mt-3">
              <%= link_to "Cambiar usuario y contraseña",
                    edit_user_registration_path,
                    class: "btn btn-link",
                    style: "font-size:1rem;" %>
            </div>
          <% end %>
        </div>
      </div> <!-- Fin columna derecha -->
    </div> <!-- Fin row -->
  </div>
</div>
